From 0e29154706683f7f70ae27fd7daffb8ac601629c Mon Sep 17 00:00:00 2001
From: William Woodall <william@osrfoundation.org>
Date: Sun, 26 Jan 2014 14:20:36 -0600
Subject: [PATCH 03/10] import patch from ros-gbp/stage-release#1

patch comes from:

http://csc.mcs.sdsmt.edu/player_compat.patch
---
 libstageplugin/p_graphics.cc   | 4 ++++
 libstageplugin/p_simulation.cc | 5 +++++
 2 files changed, 9 insertions(+)

diff --git a/libstageplugin/p_graphics.cc b/libstageplugin/p_graphics.cc
index af5d0e0..516f4ae 100644
--- a/libstageplugin/p_graphics.cc
+++ b/libstageplugin/p_graphics.cc
@@ -232,8 +232,10 @@ int InterfaceGraphics2d::ProcessMessage(QueuePointer & resp_queue,
 			PLAYER_GRAPHICS2D_CMD_POINTS, this->addr)
 			|| Message::MatchMessage(hdr, PLAYER_MSGTYPE_CMD,
 					PLAYER_GRAPHICS2D_CMD_POLYLINE, this->addr)
+#ifdef PLAYER_GRAPHICS2D_CMD_MULTILINE
 			|| Message::MatchMessage(hdr, PLAYER_MSGTYPE_CMD,
                                         PLAYER_GRAPHICS2D_CMD_MULTILINE, this->addr)
+#endif
 			|| Message::MatchMessage(hdr, PLAYER_MSGTYPE_CMD,
 					PLAYER_GRAPHICS2D_CMD_POLYGON, this->addr)) {
 		Message msg(*hdr, data);
@@ -274,6 +276,7 @@ void PlayerGraphics2dVis::RenderItem(Message & item) {
 	}
 		break;
 
+#ifdef PLAYER_GRAPHICS2D_CMD_MULTILINE
         case PLAYER_GRAPHICS2D_CMD_MULTILINE: {
                 player_graphics2d_cmd_multiline_t
                                 & data =
@@ -285,6 +288,7 @@ void PlayerGraphics2dVis::RenderItem(Message & item) {
                 glEnd();
         }
                 break;
+#endif
 
 
 
diff --git a/libstageplugin/p_simulation.cc b/libstageplugin/p_simulation.cc
index 83d410e..9fb2046 100644
--- a/libstageplugin/p_simulation.cc
+++ b/libstageplugin/p_simulation.cc
@@ -60,6 +60,11 @@ extern PlayerTime* GlobalTime;
 
 #define DRIVER_ERROR(X) printf( "Stage driver error: %s\n", X )
 
+#ifndef PLAYER_CAPABILITIES_REQ
+#ifdef PLAYER_CAPABILTIES_REQ
+#define PLAYER_CAPABILITIES_REQ PLAYER_CAPABILTIES_REQ
+#endif
+#endif
 
 ////////////////////////////////////////////////////////////////////////////////////
 
-- 
2.9.0

